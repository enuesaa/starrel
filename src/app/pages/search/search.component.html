<div class="min-h-screen">
  <app-header [showBackButton]="true"></app-header>

  <main class="max-w-4xl mx-auto px-6 py-10">
    <!-- Search Input Area -->
    <div class="mb-12 relative group">
      <div
        class="absolute -inset-1 bg-gradient-to-r from-sky-500 to-indigo-500 rounded-2xl opacity-20 group-hover:opacity-40 blur transition duration-500">
      </div>
      <div
        class="relative bg-slate-900/80 backdrop-blur-md rounded-xl p-2 border border-slate-700/50 flex items-center">
        <div class="pl-4 text-slate-400">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8" />
            <path d="m21 21-4.3-4.3" />
          </svg>
        </div>
        <input type="text" placeholder="Search bookmarks..." [(ngModel)]="searchQuery" (keyup)="onSearchKeyup()"
          (keyup.enter)="performSearch()"
          class="w-full px-4 py-4 text-xl bg-transparent text-white focus:outline-none placeholder-slate-500"
          autofocus />
        <button (click)="performSearch()" [disabled]="isSearching()"
          class="px-6 py-3 bg-slate-800 text-white font-medium rounded-lg hover:bg-slate-700 transition-colors disabled:opacity-50 mr-1 border border-slate-700/50">
          {{ isSearching() ? 'Searching...' : 'Search' }}
        </button>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isSearching()" class="flex flex-col items-center justify-center py-20">
      <div class="h-10 w-10 border-4 border-sky-500 border-t-transparent rounded-full animate-spin"></div>
    </div>

    <!-- Search Results -->
    <div *ngIf="hasSearched() && !isSearching()" class="animate-in fade-in slide-in-from-bottom-4 duration-500">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold text-white">Results <span class="text-slate-500 font-normal text-lg ml-2">({{
            searchResults().length }})</span></h2>
      </div>

      <div *ngIf="searchResults().length === 0"
        class="bg-slate-900/50 rounded-2xl p-12 text-center border border-slate-800/50 backdrop-blur-sm">
        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-800/50 text-slate-600 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" x2="12" y1="8" y2="12" />
            <line x1="12" x2="12.01" y1="16" y2="16" />
          </svg>
        </div>
        <p class="text-slate-400 text-lg">No matches found for "{{ searchQuery }}"</p>
        <p class="text-slate-600 text-sm mt-1">Try different keywords or domains</p>
      </div>

      <div *ngIf="searchResults().length > 0" class="space-y-4">
        <div *ngFor="let bookmark of searchResults()"
          class="group bg-slate-900/40 hover:bg-slate-800/50 rounded-xl p-5 border border-slate-700/30 hover:border-sky-500/30 transition-all duration-200 flex flex-col md:flex-row md:items-center gap-4 hover:shadow-md hover:shadow-sky-500/5">
          <div class="flex-1 min-w-0">
            <a [href]="bookmark.url" target="_blank" rel="noopener noreferrer"
              class="flex items-start gap-3 group/title">
              <div
                class="mt-1 p-2 rounded-lg bg-slate-800 text-slate-400 group-hover/title:text-sky-400 group-hover/title:bg-sky-500/10 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
                </svg>
              </div>
              <div class="min-w-0">
                <h3 class="font-bold text-white text-lg truncate group-hover:text-sky-400 transition-colors">
                  {{ bookmark.title }}
                </h3>
                <p class="text-sm text-slate-500 truncate font-mono opacity-80">
                  {{ bookmark.url }}
                </p>
              </div>
            </a>
          </div>

          <div class="flex items-center gap-2 pl-[3.25rem] md:pl-0">
            <a [routerLink]="['/search']" [queryParams]="{ q: getDomain(bookmark.url) }"
              class="px-3 py-1 rounded-full bg-slate-800 border border-slate-700 text-xs text-slate-400 hover:text-white hover:bg-slate-700 transition-colors cursor-pointer">
              {{ getDomain(bookmark.url) }}
            </a>
            <a [href]="bookmark.url" target="_blank" rel="noopener noreferrer"
              class="p-2 text-slate-400 hover:text-sky-400 hover:bg-sky-500/10 rounded-lg transition-colors"
              title="Open link">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                <polyline points="15 3 21 3 21 9" />
                <line x1="10" x2="21" y1="14" y2="3" />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>